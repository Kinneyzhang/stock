#+TITLE: Stock in emacs

Stock is a plug-in based on api of Sina that creates a dashboard displaying real-time data of a-share indexs and stocks.
Thanks for the super-fast Sina api, stock performs so well to update data automatically.

* Screencast
[[./imgs/stock.png]]

* Installation
Download el file to your load-path.

* Usage
#+BEGIN_SRC lisp
  (use-package stock
    :load-path "~/.emacs.d/site-lisp/stock"
    :bind
    ("C-c a a" . stock)
    :custom
    (stock-auto-refresh t)
    (stock-refresh-seconds 5)
    (stock-code-list '("sh600036" "sh601012" "sz000625" "sz002050" "sz002013" "sh600176")))
#+END_SRC

* Customization
| Variable                  | Default                                 | type    | Description                                                                             |
|---------------------------+-----------------------------------------+---------+-----------------------------------------------------------------------------------------|
| stock-index-list         | '("sh000001" "sz399001" "sz399006")     | list    | List of composite index.                                                                |
| stock-code-list         | '("sh600036" "sz000625")                | list    | List of stocks.                                                                         |
| stock-buffer-name        | "*A Chive*"                               | string  | Buffer name of stock board.                                                            |
| stock-search-buffer-name | "*A Chive - results -*"                   | string  | Buffer name of stock search board.                                                     |
| stock-auto-refresh       | t                                       | boolean | Whether to refresh automatically.                                                       |
| stock-refresh-seconds    | 5                                       | integer | Seconds of automatic refresh time.                                                      |
| stock-cache-path         | (concat user-emacs-directory ".stock") | string  | Path of cache.                                                                          |
| stock-colouring          | t                                       | boolean | Whether to apply face. If it's nil will be low-key, you can peek at it at company time. |
| stock-modeline-stocks    | nil                                     | list    | List of stock codes to display in mode-line.                                            |
| stock-modeline-refresh-seconds | 10                                 | integer | Seconds between mode-line refresh.                                                      |
| stock-modeline-format    | " [%n:%p] "                             | string  | Format string for each stock in mode-line. %n=name, %p=change percent.                  |
| stock-tabbar-stocks      | nil                                     | list    | List of stock codes to display in tab-bar.                                              |
| stock-tabbar-format      | " [%n:%p] "                             | string  | Format string for each stock in tab-bar. %n=name, %p=change percent.                    |
| stock-tabbar-refresh-seconds | 10                                  | integer | Seconds between tab-bar refresh.                                                        |

* Command
| Command                 | Description                                          |
|-------------------------+------------------------------------------------------|
| stock                  | Launch stock and switch to visual buffer.           |
| stock-refresh          | Manual refresh and render.                           |
| stock-search           | Search stocks by codes.                              |
| stock-add              | Add favorite stocks by codes                         |
| stock-remove           | Remove favorite stocks.                              |
| stock-switch-colouring | Manual switch colouring. It's handy for emergencies. |
| stock-modeline-mode    | Toggle stock price display in mode-line.             |
| stock-modeline-add     | Add stocks to mode-line display.                     |
| stock-modeline-remove  | Remove a stock from mode-line display.               |
| stock-tabbar-mode      | Toggle stock price display in tab-bar.               |
| stock-tabbar-add       | Add stocks to tab-bar display.                       |
| stock-tabbar-remove    | Remove a stock from tab-bar display.                 |

* Mode-line Display
You can display real-time stock price changes directly in the mode-line.

#+BEGIN_SRC lisp
  ;; Configure stocks to show in mode-line
  (setq stock-modeline-stocks '("sh600036" "sz000625"))
  
  ;; Enable mode-line display
  (stock-modeline-mode 1)
#+END_SRC

* Tab-bar Display
You can also display real-time stock price changes in the tab-bar.

#+BEGIN_SRC lisp
  ;; Configure stocks to show in tab-bar
  (setq stock-tabbar-stocks '("sh600036" "sz000625"))
  
  ;; Enable tab-bar display
  (stock-tabbar-mode 1)
#+END_SRC

* For traders
#+BEGIN_QUOTE
bought and forget.
#+END_QUOTE

** [[http://www.gnu.org/licenses/][License]]
